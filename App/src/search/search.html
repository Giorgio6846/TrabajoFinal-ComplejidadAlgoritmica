<!DOCTYPE html>
<html lang="es">
<head>
    <script src="../serverConnection/connect.js"></script>
    <script src = "search.js"></script>
    <style>
      body {
          font-family: Arial, sans-serif;
          background-color: #f0f0f0;
          padding: 30px;
      }

      .container {
          background-color: #fff;
          border: 1px solid #ccc;
          border-radius: 10px;
          padding: 20px;
      }

      .sidebar {
        background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            width: 100%;
            position: relative;
        }

      .stats {
        font-weight: bold;
            position: absolute; /* Habilita el posicionamiento absoluto */
        }

      .label {
          font-weight: bold;
      }

      input[type="submit"] {
          width: 5%;
          padding: 10px;
      }

      select{
        width: 15%;
          padding: 10px;
          margin: 5px 0;
      }

      .line-break {
          margin-top: 10px; /* Adds space between elements */
      }

      #indexPage {
        position: absolute; 
            top: 10px;
            right: 10px;
            background-color: #333;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
      }

      #indexPage:hover {
          background-color: #222;
      }

      .flex-container{
        display: flex;
      }

      .flex-SearchTable{
        flex: 4
      }

      .flex-stats{
        flex: 1;
        margin-right: 20px;
      }


  </style>
</head>

<body>
  <div class = "flex-container">
    <div class = "flex-SearchTable">
      <div id="divDepartamento">
        <label for="departamento">Departamento:</label>
        <select name="departamento" id="selectDepartamento">
          <option value="">Seleccione un departamento</option>
        </select>
      </div>

      <div class="line-break"></div>

      <div id="divProvincia">
        <label for="provincia">Provincia:</label>
        <select name="provincia" id="selectProvincia">
          <option value="">Seleccione una provincia</option>
        </select>
      </div>

      <div class="line-break"></div>

      <div id="divDistrito">
        <label for="distrito">Distrito:</label>
        <select name="distrito" id="selectDistrito">
          <option value="">Seleccione un distrito</option>
        </select>
      </div>
        <input type="submit" value="Enviar" id = "SearchData" onclick="requestDatos()">

      <div id = "Table">
        <table>
          <thead>
            <tr>
              <th>Calle</th>
              <th>Departamento</th>
              <th>Provincia</th>
              <th>Distrito</th>
              <th>Tipo vivienda</th>
              <th>Cantidad cuartos</th>
              <th>Material pared</th>
              <th>Material techo</th>
              <th>Material piso</th>
            </tr>
          </thead>
        </table>
      </div>

    </div>

    <div class = "flex-stats">
      <div class="sidebar">
        <div class="stats">
          STATS
        </div>
        <!-- Puedes agregar aquí tus estadísticas o información adicional -->
      </div>

  </div>

 </div>

  <button id="indexPage" onClick>Regresar</button>
  <br>
</body>

<script>
  indexPage.addEventListener("click", () => {
    window.location.href = "../../index.html"
  });

  if (localStorage.getItem('DepartamentoSelecionado') == "NULL") {
    document.getElementById("divDepartamento").removeAttribute("hidden")
  }
  else {
    document.getElementById("divDepartamento").setAttribute("hidden", "hidden")
  }
</script>

<script>

  var optionDepartamento = document.getElementById("selectDepartamento")
  var optionProvincia = document.getElementById("selectProvincia")
  var optionDistrito = document.getElementById("selectDistrito")
  
  optionDepartamento.addEventListener("change", function(event){
    console.log(event.target.value)
    localStorage.setItem('DepartamentoSelecionado', event.target.value)
    
    document.getElementById("selectProvincia").selectedIndex = -1;
    document.getElementById("selectDistrito").selectedIndex = -1;

    localStorage.setItem('ProvinciaSelecionado', "NULL") 
    localStorage.setItem('DistritoSelecionado', "NULL") 

    requestDatos()
  });

  optionProvincia.addEventListener("change", function (event) {
    console.log(event.target.value)
    localStorage.setItem('ProvinciaSelecionado', event.target.value) 


    document.getElementById("selectDistrito").selectedIndex = -1 ;
    localStorage.setItem('DistritoSelecionado', "NULL") 

    requestDatos()
  });

  optionDistrito.addEventListener("change", function (event) {
    console.log(event.target.value)

    localStorage.setItem('DistritoSelecionado', event.target.value)

    requestDatos()
  });



</script>

</html>